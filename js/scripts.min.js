var TL=TL||{};TL.Audioplayer=(function(m,n,d){var e=false,j,h,i,a="audio-selected",k="audio-playing",b="audio-paused";function l(){$(".audio-start").click(function(p){p.preventDefault();var o=$(this);if(o.hasClass(a)){f.toggleAudio(o)}else{if(i){i.removeClass(k).removeClass(b).removeClass(a)}i=o.addClass(a);c(i)}})}function c(r){var o=$(r).addClass(k),q=o.attr("href"),p=o.data("ogg");if(h){h.pause();$(j).remove()}if(e){j=$('<div class="player"><audio><source src="'+q+'" type="audio/mp3"><source src="'+p+'" type="audio/ogg"></audio></div>').appendTo("body");h=$(".player audio").get(0);h.play();f.audioProgress();f.audioEnd()}else{TL.Audioplayer.vars.flashObj.fl_loadAudio(q)}}function g(){$('<div id="'+f.vars.flashID+'" />').appendTo("body");swfobject.embedSWF("swf/fl_audioplayer.swf",f.vars.flashID,"0","0","8.0.0")}var f={vars:{flashObj:"",flashID:"tl-audioplayer"},init:function(){e=f.audioSupport();if(!e){$LAB.script("js/libs/swfobject.js").wait(function(){if(swfobject.hasFlashPlayerVersion("8")){g();l()}})}else{l()}},toggleAudio:function(p){var o=$(p);if(o.hasClass("audio-paused")){o.removeClass(b).addClass(k);f.audioPlay()}else{o.removeClass(k).addClass(b);f.audioPause()}},audioPlay:function(){if(e){h.play()}else{f.vars.flashObj.fl_playAudio()}},audioPause:function(){if(e){h.pause()}else{f.vars.flashObj.fl_stopAudio()}},audioProgress:function(){$(h).bind("timeupdate",function(){f.displayProgress(h.currentTime,h.duration)})},displayProgress:function(s,r){var u=parseInt(r-s,10),t=(s/r)*100,q=Math.floor(u/60,10),p=u-q*60,o=Math.floor((s/r)*100);log(o);i.css({"background-position":o+"%"})},audioEnd:function(){$(h).bind("ended",function(){i.removeClass(k).removeClass(b).removeClass(a);log("ended")})},audioSupport:function(){var p=n.createElement("audio"),o=(p.play)?true:false;return o}};return f})(this,this.document);fl_ready=function(){if(navigator.appName.indexOf("Microsoft")!=-1){TL.Audioplayer.vars.flashObj=window[TL.Audioplayer.vars.flashID]}else{TL.Audioplayer.vars.flashObj=document[TL.Audioplayer.vars.flashID]}};fl_alert=function(a){log(a)};(function(){var e,g,h=this,f=h.console;h.log=e=function(){g.push(arguments);f&&f.log[f.firebug?"apply":"call"](f,Array.prototype.slice.call(arguments))};h.logargs=function(a){e(a,arguments.callee.caller.arguments)};e.history=g=[]})();